/// ⣿⣿⣿⣿⣿⣿⣿⣿⣶⣤⣄⡀⠀⢿⡿⣁⠀⢆⡘⠤⡘⠠⢰⠃⡄⠂⠄⠀⠀⠀⠀⡀⡆⠌⢄⠀⠀⢠⡇⠂⡌⠄⠀⠀⠀⠀⠀⠀⠡⣖⠀⢃⠸⠀⠸⣟⡄⠘⡽⡜⡄⠀⠀⠀⠈⠦⠀⠀⠀⠸
/// ⣿⣿⣿⣿⣿⣿⡿⠁⠈⢻⡝⣟⣷⡿⢁⠤⢀⠢⢌⠰⡀⠂⡟⠠⡄⠈⠀⠀⣀⠤⠐⣰⠌⡈⢄⠂⡡⣺⠄⡇⠰⠈⡄⢃⠰⢀⠰⢀⠂⢽⠂⢼⠐⡠⠄⣿⡼⡀⠱⢹⡰⠀⠀⠀⠀⠀⣆⠀⠀⠀
/// ⣿⣿⣿⣿⣿⣿⠁⢄⠠⢀⣹⣞⡿⢁⢊⠰⢀⠎⡐⢂⠁⢳⠋⠴⠁⠀⣠⠞⡠⢁⣺⡇⠤⢁⠢⠘⢠⡿⢰⡏⠄⢃⡐⢈⠰⢈⠰⢸⠌⣸⠌⢺⡐⠤⢈⣽⣧⢩⡄⢉⢧⠡⠉⡍⠒⠤⣸⡀⠀⠀
/// ⣿⣿⣿⣿⣿⣿⠩⡐⠌⢿⡯⣿⠇⡌⠢⢡⠈⡔⠈⠂⠃⢾⢈⠒⠀⡴⢁⡾⠑⣸⢻⢀⠒⢠⠂⡉⢼⡇⢸⡇⠌⠄⡄⢃⠰⢈⠰⠸⡂⢼⢈⢹⠆⠰⢸⢿⠸⡆⢷⢈⠸⣄⠃⠤⢉⡐⠨⣧⠀⡀
/// ⣿⣿⣿⣿⣿⣿⡟⣿⣻⢾⡷⣿⠐⡄⢃⠆⠈⠐⠁⠀⠀⣾⠸⠀⢀⡇⣼⠇⢡⡏⣇⠢⠘⡀⠆⢡⡎⡇⢺⣇⠘⢠⠐⠨⡐⢂⠢⢡⡇⠾⢈⢸⡃⡘⢼⢸⠀⢻⠈⣇⠌⣷⢈⡐⠂⠤⢱⢿⠀⠔
/// ⣿⣿⣿⣿⣿⣿⣯⡚⢧⡻⣽⡏⠰⡈⢄⠈⠀⡀⠀⠀⠀⣿⢸⢀⢂⢸⡟⡈⢼⢳⠁⢂⡁⠆⡑⢺⢱⡇⣼⢿⠈⠄⡈⠡⢐⠠⢁⢺⡄⡟⡀⢺⢁⡴⡿⢸⢄⠈⡇⢺⡆⢸⡆⠤⢉⠰⢐⣸⠈⠔
/// ⣿⣿⣿⣿⣿⣿⣿⣷⠁⢿⣹⡇⠡⠌⠀⠀⠀⠀⠀⠀⢀⡿⣸⠀⢂⣿⢃⠐⡞⡼⢈⣄⣐⣤⡴⡯⢼⠴⡿⢼⠾⠶⠶⠶⣤⠂⠌⣹⢰⡇⡐⡏⢸⢡⡇⡽⡀⠑⢳⠐⣷⠀⢿⡇⠌⡐⠂⡽⢈⡐
/// ⣿⣿⣿⣿⣿⣿⣿⡏⠠⣄⣿⠄⠀⠀⠀⠀⠀⡅⠀⠠⢠⡟⣧⠈⣰⣿⠀⣼⠴⡗⢉⠉⡐⢠⢷⠃⢸⢠⠃⢸⣿⠀⢀⠂⢸⠀⢂⡏⣼⠁⣸⠁⡏⡜⡇⡧⠬⣴⣼⣀⢿⢇⢸⣹⠀⠀⡁⠇⡃⠄
/// ⣿⣿⣿⣿⣿⣿⣿⣇⡷⠊⢸⠀⠀⠀⢠⣦⣄⠇⡈⢁⠆⣿⣧⠐⣽⡇⠐⣾⢰⡇⢂⠡⢈⡏⡞⠀⡼⣸⠀⠀⣿⠀⠀⠂⣏⠐⢸⢡⡟⢀⡏⣼⢱⠁⣧⠁⠀⠀⠈⡟⣻⠺⣤⣿⡆⠐⠀⡇⠄⡈
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣄⠂⣿⠀⠀⢠⠃⢿⣣⠐⠠⠌⠠⣿⣿⠀⢿⠃⢌⣿⠸⡇⢀⢂⡼⡼⠀⢀⢧⡯⠄⡀⣿⠀⠌⢰⡇⠈⣼⡿⠁⡞⣸⢇⠇⢰⡟⠀⠀⠀⠈⡇⡝⠀⢇⡟⡧⣄⠂⡇⠀⢰
/// ⣿⣿⣿⣿⣿⡿⢭⢿⣿⣶⣻⡆⠀⡏⠠⠸⡽⣏⠐⡈⡐⢿⣻⡠⣿⠈⢸⡍⣆⣧⣾⣾⣿⣿⣶⣾⣾⣆⠄⠀⣿⡆⠀⣸⠁⣸⡿⢁⡞⡕⡹⡌⠀⣼⢁⠤⠤⢀⣀⡇⡇⠀⠸⣼⡇⠀⠑⣷⠈⣸
/// ⣿⣿⣿⣿⣿⡹⢎⣗⡻⣿⣷⣇⠘⣇⠄⡁⢻⣽⡆⠡⠠⢹⣿⡓⣿⣴⣿⣿⣿⣿⡿⣟⣿⢫⣟⣏⠉⠙⠛⠶⣿⢿⠀⡞⢀⡟⢡⣾⠊⣰⠟⠀⣼⠃⣐⣤⣴⣦⣤⣧⣇⣠⠀⣿⡇⠀⡁⡏⠀⡿
/// ⣿⣿⣿⡟⣧⣛⡭⢶⡙⣿⢻⣿⡄⢻⡔⠠⡈⢧⢿⡆⢡⠈⢿⣇⣷⣿⡿⠛⣯⢽⡳⢧⡞⠀⠀⣽⡀⠀⠀⠀⠛⠘⠻⢣⣞⣴⠟⠁⠠⠏⠀⠐⠁⢸⣿⢿⣟⠿⣿⡿⣿⣷⣤⣸⡂⠀⢸⠃⢰⠇
/// ⣿⣿⡿⣹⣧⡓⢾⢷⡟⢸⣯⢹⣷⡌⢻⣄⠱⣌⠳⣿⣦⠲⠾⣿⣿⣿⠁⠈⣟⠊⢿⡧⢿⠃⡜⣸⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣏⣟⡑⢀⡻⡴⢷⠈⠻⣿⣿⣟⠋⡟⢀⡎⠄            TY <3
/// ⣿⣿⠳⣽⠲⣝⡿⢸⡇⣸⠙⣷⢺⣿⣧⡻⣷⣌⢢⡙⢽⣷⣤⠘⢧⠙⢦⡀⢻⡌⠀⢠⢁⠒⢯⡀⠀⠀⠀⠀⠀⡀⠀⢀⠀⢀⠀⠀⠀⠀⠀⠀⠀⡏⣷⣹⡏⠵⡙⣺⠀⠀⠸⣿⣿⣾⢁⡾⠀⣲
/// ⣿⢫⡝⣾⢹⣾⢃⢹⡇⢼⠂⣿⣹⠋⢉⡿⣾⣿⣷⣌⠲⣽⢿⣿⣮⣷⣀⠈⠀⠙⠗⠒⠚⡋⠉⠀⠀⠀⠀⣺⠂⠀⠀⢀⠀⠠⠐⣀⡀⠂⠀⠀⠀⢷⢈⠩⠀⡡⠲⠏⠀⠀⣸⢟⣽⣫⡟⢁⣴⢏
/// ⣏⢷⣙⣮⠟⡐⠢⢼⡇⢸⡿⢧⣟⠀⡇⡄⣤⢩⢿⣛⢷⣤⣭⣛⢿⣮⠉⠳⠦⣤⠁⠁⡡⢈⢄⠡⠅⡆⠂⠀⠀⡈⠀⢈⡠⠆⠨⢀⠀⠀⠀⠄⠐⠈⠙⡲⢷⡼⡆⠀⠄⡐⠁⣿⣿⣋⣴⣾⢋⣾
/// ⣞⢺⣼⠏⡐⠌⡁⣿⡇⢸⡇⠼⣿⠀⢷⠀⢹⡆⣿⡉⠚⠶⣭⣻⣿⡟⠢⢄⢤⢇⡀⡅⠦⠠⡴⠀⠀⠐⢐⠀⠆⠃⠄⠖⠉⠂⠅⠊⠁⢒⠄⠐⣀⠀⠂⠉⣀⠁⡄⠁⠈⠐⢸⣿⢫⣿⡳⣵⡿⢿
/// ⣎⡿⢼⠂⡅⢊⠔⣿⣵⢺⡏⠄⣿⣧⡈⠓⢌⠷⢾⡇⢁⠢⢀⢹⠑⣷⠈⡠⠏⠤⠨⣁⢃⠕⠋⡫⢗⠉⠈⡂⠁⠀⢂⠐⢁⠣⠀⠁⠀⠘⠒⠥⠴⢄⢀⠐⠁⠀⠐⠀⠀⠈⡿⣬⡿⢣⡓⣸⣇⢻
/// ⣾⣃⡯⢼⣀⠣⣈⣿⡽⣺⠛⢠⠹⡻⣿⣦⡀⠑⠪⣇⠂⠔⡈⡾⠊⣿⠎⠵⠃⡓⠀⡀⠉⠄⠆⠁⠉⠀⠈⠡⠂⠀⠀⡀⢈⣀⠊⣡⠂⠀⡐⠛⠊⢁⠰⠖⠃⠀⠁⢀⡀⢰⠟⡞⠡⢠⢰⣿⠸⣸
/// ⣿⣿⣳⢯⣿⣿⣿⣷⣽⣹⡇⠌⣷⢳⢋⠻⢿⣦⣀⡟⡀⠊⢰⡇⠂⣿⡇⠠⠁⠀⠁⠀⡐⠀⠀⠀⠀⠀⠀⠀⠀⠀⡠⡔⠁⠀⠉⠢⢀⠀⠀⠀⠀⠈⠈⠁⢀⠠⠊⠀⠈⢺⡞⠠⢁⢂⣯⡏⠵⡘
/// ⣿⣿⡜⣿⣿⣿⣿⣿⢾⣻⣧⡂⢹⣏⣿⡄⠌⢻⣿⣧⠀⠡⣸⠠⠁⣾⡇⠀⠀⠀⠀⠀⠈⠀⠀⠀⠀⠀⢀⡠⠐⠁⠀⠀⠀⠀⠀⠀⠀⠉⠫⣦⠀⠀⢀⠔⠁⠀⠀⠀⡀⠀⠙⢦⢁⡞⣼⡙⢦⠑
/// ⣿⣿⡽⣹⣿⣿⣿⣿⡯⣷⣯⢿⣄⠻⣜⣷⡈⠄⢻⣷⠈⢠⡗⠠⠁⣿⢸⣄⠀⠀⠀⠀⠀⠀⢀⡔⠊⠉⠀⠀⠀⠀⠀⠀⡰⠂⠤⣀⠀⠀⢀⣃⠀⣰⠁⠀⠀⡴⢴⣧⠀⡀⠀⠀⠙⢦⡏⡝⢢⠌
/// ⡿⣿⣿⣽⣿⢿⣿⣿⡷⣣⢿⣯⣻⢷⣽⢞⣿⡄⠂⣿⠀⣸⠃⠠⢁⣷⠸⡇⠑⢤⡀⠀⣠⠞⠁⠀⠀⠀⠀⠀⠀⣀⠔⠀⠀⠀⠀⠈⢧⡀⢿⣿⣾⡿⠁⡠⢊⣴⣿⢸⡷⣄⣐⠀⢀⠄⠙⠓⠧⣌
/// ⣿⣷⣿⣿⣿⣿⣿⣿⡿⣵⢫⣷⣏⣟⣾⣻⣾⣿⣆⢿⠀⡿⠀⠀⠂⣼⠐⣿⡀⢀⡼⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠒⢄⡀⠀⠀⠀⠀⠑⠮⠿⠛⠒⢈⣴⣿⣿⡏⡾⢁⠈⣿⠖⠁⠀⠀⠀⠀⠀
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣳⣿⣿⣿⣯⣟⣷⢯⣿⣿⣿⢰⠃⠀⠀⠐⢸⠀⣻⠟⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠲⠄⡀⠀⠀⠀⢀⣠⣾⣿⣿⣿⣿⣃⠇⢂⢡⠏⠀⠀⠀⠀⢀⠀⠀
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣞⢾⡻⢷⣯⣿⣼⠀⠀⠀⢀⡼⠞⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠲⣤⣀⡀⠀⠀⠀⠀⠈⠢⣤⣾⣿⣿⣿⣿⣿⣿⣿⢸⠠⡱⠃⠀⠀⠀⣠⣶⠋⠀⠀
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⢾⣽⣯⣞⣽⡟⠀⣠⠔⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⠿⣷⣤⡀⠀⠀⠀⠀⠙⢿⣿⣿⣿⣿⣷⣿⢀⡜⠁⠀⠀⣠⡞⡱⠁⠀⠀⠀
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⢯⢿⣿⣿⣿⣧⠞⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠐⠠⢀⠀⠀⠀⠀⠀⠀⠙⢿⣷⣄⡀⠀⠀⠀⠹⢿⣿⣿⣿⣿⡼⠀⠀⢀⣾⣿⡟⠀⠀⠀⠀⠀
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡻⣞⢾⡹⡿⠀⠀⠀⢀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠉⠂⢄⡀⠀⠀⣠⣿⣿⣿⣿⣦⣄⠀⠀⠀⠻⣿⣿⡟⢀⠀⣡⠂⢺⣿⡣⢀⢀⠄⠀⠀
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⣝⣾⣿⣧⢶⡶⣿⢿⣿⣦⣤⣀⣀⣀⣤⣀⣴⣶⣤⣤⣄⡀⠀⠀⢀⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣄⠀⢠⣾⣿⣾⡷⣰⠉⡆⣹⣿⣿⣶⣿⣆⡀⢀
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡞⣯⢷⣏⡿⣽⣻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣶⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣦⣽⣿⡿⠕⠉⢆⢱⢸⣿⣿⣿⣿⣿⣿⣿
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣟⡽⣾⣹⡞⣷⡽⣞⡽⣯⢿⣹⢯⣿⣿⣿⣿⣯⣿⡿⣿⣿⣿⣿⣿⣻⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡀⠀⠀⢪⢿⣿⣿⣿⣿⣿⣿⣿
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⡽⣶⢯⡽⣞⣳⢯⡽⣞⣯⣽⢫⣿⡟⣿⣻⢿⡽⣿⣿⣿⣿⣻⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⡈⠀⠀⠹⣿⣿⣿⣿⣿⣿⣿
/// ⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣯⢷⣛⡾⣽⣹⡽⢾⣹⠷⣞⣞⠿⣼⣿⡘⣯⣾⣿⢿⣹⢯⣟⡿⣿⢿⣾⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣄⠀⠀⠈⠻⣿⣿⣿⣿⣿


using BMod.Auto;
using BMod.Discord;
using BMod.ESP;
using BMod.Patches;
using Il2Cpp;
using Il2CppBasicTypes;
using Il2CppInterop.Runtime;
using Il2CppInterop.Runtime.InteropTypes.Arrays;
using Il2CppKernys.Bson;
using Il2CppSystem;
using MelonLoader;
using MongoDB.Bson;
using MongoDB.Bson.IO;
using MongoDB.Bson.Serialization;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using UnityEngine;

namespace BMod
{
  public class Main : MelonMod
  {
    public static MelonLogger.Instance Logger;
    private static Main.Tab tab = Main.Tab.Page1;
    private static Main.SubPage1 sub1 = Main.SubPage1.None;
    public static List<Vector2i> gemstonesInWorld = new List<Vector2i>();
    private static bool usedNoBounceBefore = false;
    public static BSONObject fban = new BSONObject();
    private static string dataHackInput = "DataHack input or packet ID";
    public static bool dataHackShow = false;
    private static Rect windowSize = new Rect((float) (Screen.width / 2 - 200), (float) (Screen.height / 2 - 200), 404f, 360f);
    private static Rect autoStatsRect = new Rect();
    private static GUIStyle infoBoxStyle1 = new GUIStyle()
    {
      alignment = (TextAnchor) 0,
      fontSize = 16,
      fontStyle = (FontStyle) 1
    };
    private static GUIStyle infoBoxStyle2 = new GUIStyle()
    {
      alignment = (TextAnchor) 4,
      fontSize = 30,
      fontStyle = (FontStyle) 1
    };
    internal static bool showMenu = true;
    internal static bool showInfoBox = true;
    private static bool ptype0 = true;
    private static bool ptype1 = false;
    private static bool ptype2 = false;
    private static bool limitMode4 = false;
    private static string _farmBotPlayOptionsText = "/fbfm";
    internal static string bossFinderText = "Boss Finder: OFF";
    private static GUIStyle loginStyle = new GUIStyle();
    private static int[] gemBlocks = new int[5]
    {
      3995,
      3996,
      3999,
      4000,
      4002
    };
    internal static Vector2i warpMP = new Vector2i(-1, -1);
    internal static bool warpOnTeleport = false;

    private static Rect loginBoxSize
    {
      get => new Rect(0.0f, 0.0f, (float) Screen.width / 3.5f, (float) Screen.height);
    }

    public virtual void OnLateInitializeMelon()
    {
      Console.OutputEncoding = Encoding.Unicode;
      ConfigData.maxCharsPerSign = 2000;
      ConfigData.cooldownToPlaceBlock = 0.0f;
      ConfigData.minTimeBetweenFRQMessages = 1;
      ConfigData.cooldownToPlaceBlock = 0.0f;
      ConfigData.maxEmojisPerMessage = (byte) 50;
      UserIdent.sendAttachedPlayersList = false;
      Main.loginStyle.fontSize = 25;
      Main.loginStyle.normal.textColor = Color.green;
      Main.loginStyle.alignment = (TextAnchor) 1;
      Main.loginStyle.padding.left = 10;
      Main.infoBoxStyle1.normal.textColor = Color.white;
      Main.infoBoxStyle2.normal.textColor = Color.white;
      try
      {
        if (File.Exists(AppDomain.CurrentDomain.BaseDirectory + "UserData\\BModSettings.sex"))
        {
          BSONObject bsonObject = SimpleBSON.Load(Il2CppStructArray<byte>.op_Implicit(File.ReadAllBytes(AppDomain.CurrentDomain.BaseDirectory + "UserData\\BModSettings.sex")));
          Globals.freeCamSpeed = (float) ((BSONValue) bsonObject)["FreeCamSpeed"].doubleValue;
          Globals.speedHackSpeed = (float) ((BSONValue) bsonObject)["SpeedHack"].doubleValue;
          Globals.keysFlySpeed = (float) ((BSONValue) bsonObject)["KeysFly"].doubleValue;
          Globals.dataTooltip = BSONValue.op_Implicit(((BSONValue) bsonObject)["DataTooltip"]);
          Main.showMenu = BSONValue.op_Implicit(((BSONValue) bsonObject)["ShowGUI"]);
          Main.dataHackShow = BSONValue.op_Implicit(((BSONValue) bsonObject)["ExpertMode"]);
          DiscordManager.initialized = BSONValue.op_Implicit(((BSONValue) bsonObject)["DiscordRPC"]);
          DiscordManager.showWorld = BSONValue.op_Implicit(((BSONValue) bsonObject)["ShowWorldRPC"]);
          DiscordManager.showName = BSONValue.op_Implicit(((BSONValue) bsonObject)["ShowNameRPC"]);
          Globals.antiBounce = BSONValue.op_Implicit(((BSONValue) bsonObject)["WalkON"]);
          Globals.godMode = BSONValue.op_Implicit(((BSONValue) bsonObject)["GodMode"]);
          Globals.fly = BSONValue.op_Implicit(((BSONValue) bsonObject)["Fly"]);
          Globals.noKnockBack = BSONValue.op_Implicit(((BSONValue) bsonObject)["NoKB"]);
          Globals.blockOnPlayer = BSONValue.op_Implicit(((BSONValue) bsonObject)["BlockKill"]);
          Globals.antiCollect = BSONValue.op_Implicit(((BSONValue) bsonObject)["Anti-Collect"]);
          Globals.instaRespawn = BSONValue.op_Implicit(((BSONValue) bsonObject)["InstaRes"]);
          Globals.mouseFly = BSONValue.op_Implicit(((BSONValue) bsonObject)["MouseFly"]);
          Globals.aiAimBot = BSONValue.op_Implicit(((BSONValue) bsonObject)["EnemyAim"]);
          Globals.autoClaimGift = BSONValue.op_Implicit(((BSONValue) bsonObject)["AutoGift"]);
          Globals.noBlockKill = BSONValue.op_Implicit(((BSONValue) bsonObject)["NoBK"]);
          Globals.colorfulNames = BSONValue.op_Implicit(((BSONValue) bsonObject)["ColorfulNames"]);
          Globals.handleKick = BSONValue.op_Implicit(((BSONValue) bsonObject)["BanDelay"]);
          Globals.ignoreDisconnect = BSONValue.op_Implicit(((BSONValue) bsonObject)["IgnoreDC"]);
          Globals.recipesHack = BSONValue.op_Implicit(((BSONValue) bsonObject)["RecipeHack"]);
          Globals.bedHack = BSONValue.op_Implicit(((BSONValue) bsonObject)["BedHack"]);
          Globals.noProfanityFilter = BSONValue.op_Implicit(((BSONValue) bsonObject)["NoCensor"]);
          Globals.noAFK = BSONValue.op_Implicit(((BSONValue) bsonObject)["NoAFK"]);
          Globals.gemstoneESP = BSONValue.op_Implicit(((BSONValue) bsonObject)["GemstoneESP"]);
          Globals.extraESP = BSONValue.op_Implicit(((BSONValue) bsonObject)["ExtraEventESP"]);
          Globals.playerESP = BSONValue.op_Implicit(((BSONValue) bsonObject)["PlayerESP"]);
          Globals.enemyESP = BSONValue.op_Implicit(((BSONValue) bsonObject)["EnemyESP"]);
          Globals.giftboxESP = BSONValue.op_Implicit(((BSONValue) bsonObject)["GiftESP"]);
          Globals.collectableESP = BSONValue.op_Implicit(((BSONValue) bsonObject)["CollectableESP"]);
          PlayerCheats.dataSpamTimerMax = (float) BSONValue.op_Implicit(((BSONValue) bsonObject)["DataSpamTimerMax"]);
          MineBot.showPath = BSONValue.op_Implicit(((BSONValue) bsonObject)["MBotPath"]);
          Globals.mineBot.mineLevels[4] = BSONValue.op_Implicit(((BSONValue) bsonObject)["MBotL4"]);
          Globals.mineBot.mineLevels[3] = BSONValue.op_Implicit(((BSONValue) bsonObject)["MBotL3"]);
          Globals.mineBot.mineLevels[2] = BSONValue.op_Implicit(((BSONValue) bsonObject)["MBotL2"]);
          Globals.mineBot.mineLevels[1] = BSONValue.op_Implicit(((BSONValue) bsonObject)["MBotL1"]);
          MineBot.enemyPriorityMode = (float) ((BSONValue) bsonObject)["MBotEPriority"].doubleValue;
          MineBot.pickShit = BSONValue.op_Implicit(((BSONValue) bsonObject)["MBotShit"]);
          MineBot.useWebhook = BSONValue.op_Implicit(((BSONValue) bsonObject)["MBotLogs"]);
          Globals.mineBot.webhook = BSONValue.op_Implicit(((BSONValue) bsonObject)["Webhook"]);
          MineBot.nigaMode = BSONValue.op_Implicit(((BSONValue) bsonObject)["MBotNiga"]);
          MelonLogger.Msg("Settings restored.");
        }
      }
      catch
      {
      }
      if (!DiscordManager.initialized)
        return;
      DiscordManager.Init();
    }

    public virtual void OnApplicationQuit()
    {
      using (BinaryWriter binaryWriter1 = new BinaryWriter((Stream) File.Open(AppDomain.CurrentDomain.BaseDirectory + "UserData\\BModSettings.sex", FileMode.Create)))
      {
        BinaryWriter binaryWriter2 = binaryWriter1;
        BSONObject bsonObject = new BSONObject();
        ((BSONValue) bsonObject)["FreeCamSpeed"] = BSONValue.op_Implicit((double) Globals.freeCamSpeed);
        ((BSONValue) bsonObject)["SpeedHack"] = BSONValue.op_Implicit((double) Globals.speedHackSpeed);
        ((BSONValue) bsonObject)["KeysFly"] = BSONValue.op_Implicit((double) Globals.keysFlySpeed);
        ((BSONValue) bsonObject)["DataTooltip"] = BSONValue.op_Implicit(Globals.dataTooltip);
        ((BSONValue) bsonObject)["ShowGUI"] = BSONValue.op_Implicit(Main.showMenu);
        ((BSONValue) bsonObject)["ExpertMode"] = BSONValue.op_Implicit(Main.dataHackShow);
        ((BSONValue) bsonObject)["DiscordRPC"] = BSONValue.op_Implicit(DiscordManager.initialized);
        ((BSONValue) bsonObject)["ShowWorldRPC"] = BSONValue.op_Implicit(DiscordManager.showWorld);
        ((BSONValue) bsonObject)["ShowNameRPC"] = BSONValue.op_Implicit(DiscordManager.showName);
        ((BSONValue) bsonObject)["WalkON"] = BSONValue.op_Implicit(Globals.antiBounce);
        ((BSONValue) bsonObject)["GodMode"] = BSONValue.op_Implicit(Globals.godMode);
        ((BSONValue) bsonObject)["Fly"] = BSONValue.op_Implicit(Globals.fly);
        ((BSONValue) bsonObject)["NoKB"] = BSONValue.op_Implicit(Globals.noKnockBack);
        ((BSONValue) bsonObject)["BlockKill"] = BSONValue.op_Implicit(Globals.blockOnPlayer);
        ((BSONValue) bsonObject)["Anti-Collect"] = BSONValue.op_Implicit(Globals.antiCollect);
        ((BSONValue) bsonObject)["InstaRes"] = BSONValue.op_Implicit(Globals.instaRespawn);
        ((BSONValue) bsonObject)["MouseFly"] = BSONValue.op_Implicit(Globals.mouseFly);
        ((BSONValue) bsonObject)["EnemyAim"] = BSONValue.op_Implicit(Globals.aiAimBot);
        ((BSONValue) bsonObject)["AutoGift"] = BSONValue.op_Implicit(Globals.autoClaimGift);
        ((BSONValue) bsonObject)["NoBK"] = BSONValue.op_Implicit(Globals.noBlockKill);
        ((BSONValue) bsonObject)["ColorfulNames"] = BSONValue.op_Implicit(Globals.colorfulNames);
        ((BSONValue) bsonObject)["BanDelay"] = BSONValue.op_Implicit(Globals.handleKick);
        ((BSONValue) bsonObject)["IgnoreDC"] = BSONValue.op_Implicit(Globals.ignoreDisconnect);
        ((BSONValue) bsonObject)["RecipeHack"] = BSONValue.op_Implicit(Globals.recipesHack);
        ((BSONValue) bsonObject)["BedHack"] = BSONValue.op_Implicit(Globals.bedHack);
        ((BSONValue) bsonObject)["NoCensor"] = BSONValue.op_Implicit(Globals.noProfanityFilter);
        ((BSONValue) bsonObject)["NoAFK"] = BSONValue.op_Implicit(Globals.noAFK);
        ((BSONValue) bsonObject)["GemstoneESP"] = BSONValue.op_Implicit(Globals.gemstoneESP);
        ((BSONValue) bsonObject)["ExtraEventESP"] = BSONValue.op_Implicit(Globals.extraESP);
        ((BSONValue) bsonObject)["PlayerESP"] = BSONValue.op_Implicit(Globals.playerESP);
        ((BSONValue) bsonObject)["EnemyESP"] = BSONValue.op_Implicit(Globals.enemyESP);
        ((BSONValue) bsonObject)["GiftESP"] = BSONValue.op_Implicit(Globals.giftboxESP);
        ((BSONValue) bsonObject)["CollectableESP"] = BSONValue.op_Implicit(Globals.collectableESP);
        ((BSONValue) bsonObject)["DataSpamTimerMax"] = BSONValue.op_Implicit((double) PlayerCheats.dataSpamTimerMax);
        ((BSONValue) bsonObject)["MBotPath"] = BSONValue.op_Implicit(MineBot.showPath);
        ((BSONValue) bsonObject)["MBotL4"] = BSONValue.op_Implicit(Globals.mineBot.mineLevels[4]);
        ((BSONValue) bsonObject)["MBotL3"] = BSONValue.op_Implicit(Globals.mineBot.mineLevels[3]);
        ((BSONValue) bsonObject)["MBotL2"] = BSONValue.op_Implicit(Globals.mineBot.mineLevels[2]);
        ((BSONValue) bsonObject)["MBotL1"] = BSONValue.op_Implicit(Globals.mineBot.mineLevels[1]);
        ((BSONValue) bsonObject)["MBotEPriority"] = BSONValue.op_Implicit((double) MineBot.enemyPriorityMode);
        ((BSONValue) bsonObject)["MBotShit"] = BSONValue.op_Implicit(MineBot.pickShit);
        ((BSONValue) bsonObject)["MBotLogs"] = BSONValue.op_Implicit(MineBot.useWebhook);
        ((BSONValue) bsonObject)["Webhook"] = BSONValue.op_Implicit(Globals.mineBot.webhook);
        ((BSONValue) bsonObject)["MBotNiga"] = BSONValue.op_Implicit(MineBot.nigaMode);
        byte[] buffer = Il2CppArrayBase<byte>.op_Implicit((Il2CppArrayBase<byte>) SimpleBSON.Dump(bsonObject));
        binaryWriter2.Write(buffer);
      }
      MelonLogger.Msg("Settings saved.");
    }

    public virtual void OnEarlyInitializeMelon() => Console.WriteLine("FEMBOYS <3");

    public virtual void OnSceneWasInitialized(int buildIndex, string sceneName)
    {
      if (!(sceneName == "World"))
        return;
      BMod.Patches.Patches.shouldUpdateESP = true;
    }

    private void MyMenu(int id)
    {
      if (GUI.Button(new Rect(2f, 16.5f, 80f, 30f), "Buttons"))
      {
        Main.tab = Main.Tab.Page1;
        double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
      }
      if (GUI.Button(new Rect(82f, 16.5f, 80f, 30f), "Toggles"))
      {
        Main.tab = Main.Tab.Page2;
        double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
      }
      if (GUI.Button(new Rect(162f, 16.5f, 80f, 30f), "Data"))
      {
        Main.tab = Main.Tab.Page3;
        double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
      }
      if (GUI.Button(new Rect(242f, 16.5f, 80f, 30f), "Sliders"))
      {
        Main.tab = Main.Tab.Page4;
        double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
      }
      if (GUI.Button(new Rect(322f, 16.5f, 80f, 30f), "ESP"))
      {
        Main.tab = Main.Tab.Page5;
        double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
      }
      switch (Main.tab)
      {
        case Main.Tab.Page1:
          switch (Main.sub1)
          {
            case Main.SubPage1.None:
              GUI.Label(new Rect(5f, 50f, 100f, 20f), "Buttons");
              if (GUI.Button(new Rect(5f, 75f, 130f, 33f), "Find Boss/Milk"))
              {
                bool flag1 = Globals.world.ContainsBlock((World.BlockType) 1341);
                bool flag2 = Globals.world.ContainsBlock((World.BlockType) 2066);
                Utils.Msg((!flag1 || !(Globals.world.worldName == "NETHERWORLD") ? "No boss found" : "THERE IS A BOSS IN THE NETHERWORLD!") + ", " + (!flag2 || !(Globals.world.worldName == "NETHERWORLD") ? "No shard/milk found" : "MILK OR SHARD FOUND!"));
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(135f, 75f, 130f, 33f), Main.bossFinderText) && Object.op_Inequality((Object) Globals.player, (Object) null))
              {
                Globals.bossFinder = !Globals.bossFinder;
                if (Globals.bossFinder)
                {
                  Main.bossFinderText = "BossFinder: ON";
                  if (Globals.world.worldName != "NETHERWORLD")
                  {
                    SceneLoader.JoinDynamicWorld("NETHERWORLD", "", false);
                  }
                  else
                  {
                    InfoPopupUI.SetupInfoPopup("ALREADY HERE", "Leave nether first");
                    InfoPopupUI.ForceShowMenu();
                  }
                }
                else
                  Main.bossFinderText = "BossFinder: OFF";
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(3f, 125f, 100f, 33f), "FarmBot"))
              {
                Main.sub1 = Main.SubPage1.FarmBot;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(103f, 125f, 100f, 33f), "FishBot(bug)"))
              {
                Main.sub1 = Main.SubPage1.FishBot;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(203f, 125f, 100f, 33f), "Mine Bot"))
              {
                Main.sub1 = Main.SubPage1.MineBot;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(303f, 125f, 100f, 33f), "AntiCheat"))
              {
                Main.sub1 = Main.SubPage1.ACTk;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(5f, 175f, 100f, 33f), "Read WL Data"))
              {
                WorldCheats.QueryWLData();
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(105f, 175f, 100f, 33f), "Query Players"))
              {
                WorldCheats.QueryPlayers();
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(205f, 175f, 100f, 33f), "SpinMineWheel"))
              {
                if (Globals.world != null && Object.op_Inequality((Object) Globals.player, (Object) null))
                {
                  OutgoingMessages.SendSpinMiningRouletteMessage();
                  Globals.playerData.RemoveItemFromInventory((World.BlockType) 4171, (PlayerData.InventoryItemType) 7);
                }
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
              }
              if (GUI.Button(new Rect(5f, 225f, 100f, 33f), "RichPresence"))
              {
                Main.sub1 = Main.SubPage1.RichPresence;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
                break;
              }
              break;
            case Main.SubPage1.FarmBot:
              GUI.Label(new Rect(5f, 50f, 250f, 20f), "Buttons\\Farm Bot" + (FarmBot.rejoining ? " [rejoining]" : ""));
              if (GUI.Button(new Rect(5f, 75f, 50f, 20f), "back"))
              {
                Main.sub1 = Main.SubPage1.None;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 47, 0.0f, -1);
              }
              if (FarmBot.active)
              {
                if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Stop"))
                {
                  double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
                  FarmBot.Stop("", true);
                }
              }
              else if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Launch"))
              {
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
                FarmBot.Start();
              }
              if (!FarmBot.active)
              {
                GUI.Box(new Rect(5f, 135f, 130f, 210f), "Play Options");
                GUI.BeginGroup(new Rect(5f, 135f, 130f, 210f));
                Main.ptype0 = GUI.Toggle(new Rect(5f, 15f, 100f, 25f), Main.ptype0, "Infinite");
                Main.ptype1 = GUI.Toggle(new Rect(5f, 45f, 100f, 25f), Main.ptype1, "Loops");
                Main.ptype2 = GUI.Toggle(new Rect(5f, 75f, 100f, 25f), Main.ptype2, "Time");
                Main.limitMode4 = GUI.Toggle(new Rect(5f, 105f, 100f, 25f), Main.limitMode4, "Blocks");
                if (Main.limitMode4)
                {
                  Main.ptype0 = false;
                  Main.ptype1 = false;
                  Main.ptype2 = false;
                  FarmBot.limit = FarmBot.LimitMode.Blocks;
                }
                else if (Main.ptype2)
                {
                  Main.ptype0 = false;
                  Main.ptype1 = false;
                  Main.limitMode4 = false;
                  FarmBot.limit = FarmBot.LimitMode.Time;
                }
                else if (Main.ptype1)
                {
                  Main.ptype0 = false;
                  Main.ptype2 = false;
                  Main.limitMode4 = false;
                  FarmBot.limit = FarmBot.LimitMode.Loops;
                }
                else if (Main.ptype0)
                {
                  Main.ptype1 = false;
                  Main.ptype2 = false;
                  Main.limitMode4 = false;
                  FarmBot.limit = FarmBot.LimitMode.None;
                }
                else
                {
                  Main.ptype0 = true;
                  Main.ptype1 = false;
                  Main.ptype2 = false;
                  Main.limitMode4 = false;
                }
                Main._farmBotPlayOptionsText = GUI.TextField(new Rect(5f, 135f, 100f, 25f), Main._farmBotPlayOptionsText, 5);
                if (Main.ptype1 || Main.limitMode4)
                {
                  try
                  {
                    FarmBot.maxLoops = Convert.ToInt32(Main._farmBotPlayOptionsText);
                    FarmBot.maxBlocks = Convert.ToInt32(Main._farmBotPlayOptionsText);
                  }
                  catch
                  {
                    Main._farmBotPlayOptionsText = "10";
                  }
                }
                FarmBot.maxTimeString = Main._farmBotPlayOptionsText;
                GUI.EndGroup();
              }
              if (!FarmBot.active)
              {
                GUI.Box(new Rect(140f, 135f, 150f, 210f), "Stats");
                Main.autoStatsRect = new Rect(140f, 135f, 150f, 210f);
              }
              else
              {
                GUI.Box(new Rect(5f, 135f, 394f, 210f), "Stats");
                Main.autoStatsRect = new Rect(5f, 135f, 394f, 210f);
              }
              GUI.BeginGroup(Main.autoStatsRect);
              GUI.Label(new Rect(5f, 15f, 145f, 25f), string.Format("Started: {0}.{1} {2}:{3}:{4}", (object) ((DateTime) ref FarmBot.startTime).Day, (object) ((DateTime) ref FarmBot.startTime).Month, (object) ((DateTime) ref FarmBot.startTime).Hour, (object) ((DateTime) ref FarmBot.startTime).Minute, (object) ((DateTime) ref FarmBot.startTime).Second));
              GUI.Label(new Rect(5f, 45f, 145f, 25f), string.Format("Passed : {0}:{1}:{2}", (object) ((DateTime) ref FarmBot.timeSpent).Hour, (object) ((DateTime) ref FarmBot.timeSpent).Minute, (object) ((DateTime) ref FarmBot.timeSpent).Second));
              GUI.Label(new Rect(5f, 75f, 145f, 25f), "Loops: " + FarmBot.loops.ToString() + "/" + FarmBot.maxLoops.ToString());
              GUI.Label(new Rect(5f, 105f, 145f, 25f), "Destroyed: " + FarmBot.destroyed.ToString());
              GUI.Label(new Rect(5f, 135f, 145f, 25f), "Seeds: " + FarmBot.seedsDropped.ToString());
              GUI.Label(new Rect(5f, 165f, 145f, 25f), "Gems: " + FarmBot.gemsProfit.ToString());
              if (FarmBot.active)
              {
                if (FarmBot.limit == FarmBot.LimitMode.None)
                  GUI.Label(new Rect(200f, 15f, 145f, 25f), "Unlimited Loops");
                if (FarmBot.limit == FarmBot.LimitMode.Loops)
                  GUI.Label(new Rect(200f, 15f, 145f, 25f), "Finish on " + FarmBot.maxLoops.ToString() + " loops");
                else if (FarmBot.limit == FarmBot.LimitMode.Time)
                  GUI.Label(new Rect(200f, 15f, 145f, 25f), string.Format("{0}.{1} {2}:{3}:{4}", (object) ((DateTime) ref FarmBot.finishTime).Day, (object) ((DateTime) ref FarmBot.finishTime).Month, (object) ((DateTime) ref FarmBot.finishTime).Hour, (object) ((DateTime) ref FarmBot.finishTime).Minute, (object) ((DateTime) ref FarmBot.finishTime).Second));
                else if (FarmBot.limit == FarmBot.LimitMode.Blocks)
                  GUI.Label(new Rect(200f, 15f, 145f, 25f), "Finish on " + FarmBot.maxBlocks.ToString() + " blocks");
                GUI.Label(new Rect(200f, 45f, 145f, 25f), "On Finish:");
                GUI.Label(new Rect(200f, 70f, 145f, 25f), "Leave World: " + this.GetOnOff(FarmBot.leaveEnd));
                GUI.Label(new Rect(200f, 95f, 145f, 25f), "Hibernate PC: " + this.GetOnOff(FarmBot.hibernateEnd));
              }
              GUI.EndGroup();
              if (!FarmBot.active)
              {
                GUI.Box(new Rect(295f, 135f, 104f, 210f), "On Finished");
                GUI.BeginGroup(new Rect(295f, 135f, 104f, 210f));
                FarmBot.leaveEnd = GUI.Toggle(new Rect(5f, 15f, 104f, 25f), FarmBot.leaveEnd, "Leave World");
                FarmBot.hibernateEnd = GUI.Toggle(new Rect(5f, 45f, 104f, 25f), FarmBot.hibernateEnd, "Hibernate PC");
                GUI.EndGroup();
                break;
              }
              break;
            case Main.SubPage1.ACTk:
              GUI.Label(new Rect(5f, 50f, 200f, 20f), "Buttons\\AntiCheat");
              if (GUI.Button(new Rect(5f, 75f, 50f, 20f), "back"))
              {
                Main.sub1 = Main.SubPage1.None;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 47, 0.0f, -1);
              }
              if (ACTk.active)
              {
                if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Deactivate"))
                {
                  double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
                  ACTk.Stop("", true);
                }
              }
              else if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Activate"))
              {
                string str = PlayerIdNameHelper.CombineIdAndName(Globals.playerData.playerId, StaticPlayer.theRealPlayername);
                ILockWorld lockWorldDataHelper = Globals.world.lockWorldDataHelper;
                if ((lockWorldDataHelper.GetPlayersWhoHaveAccessToLock().Contains(str) || lockWorldDataHelper.GetPlayersWhoHaveMinorAccessToLock().Contains(str) || lockWorldDataHelper.GetPlayerWhoOwnsLockId() == Globals.playerData.playerId) && lockWorldDataHelper.GetPlayerWhoOwnsLockName() != "Player(Clone)")
                {
                  double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
                  ACTk.Start();
                }
                else
                  Utils.Error("No WL rights to do that!");
              }
              GUI.Box(new Rect(5f, 135f, 180f, 210f), "Detect Options");
              GUI.BeginGroup(new Rect(5f, 135f, 170f, 210f));
              GUI.Label(new Rect(5f, 15f, 170f, 25f), "On Cheater Detected:");
              Main.ptype0 = GUI.Toggle(new Rect(5f, 35f, 70f, 25f), Main.ptype0, "None");
              Main.ptype1 = GUI.Toggle(new Rect(5f, 65f, 70f, 25f), Main.ptype1, "Kick");
              Main.ptype2 = GUI.Toggle(new Rect(5f, 95f, 70f, 25f), Main.ptype2, "Ban");
              GUI.Label(new Rect(5f, 115f, 170f, 25f), "Detection Behaviour:");
              ACTk.chatSubmit = GUI.Toggle(new Rect(5f, 145f, 120f, 25f), ACTk.chatSubmit, "Submit in chat");
              ACTk.bypassStaff = GUI.Toggle(new Rect(5f, 175f, 120f, 25f), ACTk.bypassStaff, "Bypass minors");
              if (Main.ptype2)
              {
                Main.ptype0 = false;
                Main.ptype1 = false;
                ACTk.punishType = 2;
              }
              else if (Main.ptype1)
              {
                Main.ptype0 = false;
                Main.ptype2 = false;
                ACTk.punishType = 1;
              }
              else if (Main.ptype0)
              {
                Main.ptype1 = false;
                Main.ptype2 = false;
                ACTk.punishType = 0;
              }
              else
              {
                Main.ptype0 = true;
                Main.ptype1 = false;
                Main.ptype2 = false;
              }
              GUI.EndGroup();
              break;
            case Main.SubPage1.FishBot:
              GUI.Label(new Rect(5f, 50f, 200f, 20f), "Buttons\\FishBot");
              if (GUI.Button(new Rect(5f, 75f, 50f, 20f), "back"))
              {
                Main.sub1 = Main.SubPage1.None;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 47, 0.0f, -1);
              }
              if (FishBot.active)
              {
                if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Stop"))
                  FishBot.Stop("", true);
              }
              else if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Launch"))
                FishBot.Start();
              if (!FishBot.active)
              {
                GUI.Box(new Rect(5f, 135f, 130f, 210f), "Play Options");
                GUI.BeginGroup(new Rect(5f, 135f, 170f, 210f));
                GUI.Label(new Rect(50f, 15f, 180f, 25f), "Mode: " + Main.FishBotMode());
                FishBot.mode__float = GUI.HorizontalSlider(new Rect(5f, 22f, 40f, 25f), FishBot.mode__float, 0.0f, 1f);
                FishBot.mode = (double) FishBot.mode__float < 0.5 ? 0 : 1;
                GUI.Label(new Rect(5f, 40f, 130f, 60f), "Description:\n" + Main.FishBotModeDescription());
                GUI.EndGroup();
              }
              if (!FishBot.active)
              {
                GUI.Box(new Rect(140f, 135f, 150f, 210f), "Stats");
                Main.autoStatsRect = new Rect(140f, 135f, 150f, 210f);
              }
              else
              {
                GUI.Box(new Rect(5f, 135f, 394f, 210f), "Stats");
                Main.autoStatsRect = new Rect(5f, 135f, 394f, 210f);
              }
              GUI.BeginGroup(Main.autoStatsRect);
              GUI.Label(new Rect(5f, 15f, 145f, 25f), string.Format("Started: {0}.{1} {2}:{3}:{4}", (object) FishBot.startTime.Day, (object) FishBot.startTime.Month, (object) FishBot.startTime.Hour, (object) FishBot.startTime.Minute, (object) FishBot.startTime.Second));
              GUI.Label(new Rect(5f, 45f, 145f, 25f), string.Format("Passed : {0}:{1}:{2}", (object) FishBot.timeSpent.Hour, (object) FishBot.timeSpent.Minute, (object) FishBot.timeSpent.Second));
              GUI.Label(new Rect(5f, 75f, 145f, 25f), "FGems: " + FishBot.gemsProfit.ToString());
              GUI.Label(new Rect(5f, 105f, 145f, 25f), "Fishes: " + FishBot.fishes.ToString());
              GUI.Label(new Rect(5f, 135f, 145f, 25f), "Ingredients: -");
              GUI.Label(new Rect(5f, 165f, 145f, 25f), "Lures Lost: " + FishBot.fails.ToString());
              if (FishBot.active)
              {
                GUI.Label(new Rect(200f, 15f, 145f, 25f), "Lures Left: " + Globals.playerData.GetCount(Globals.gameplayUI.inventoryControl.GetCurrentSelection()).ToString());
                GUI.Label(new Rect(200f, 45f, 145f, 25f), "On Finish:");
                GUI.Label(new Rect(200f, 70f, 145f, 25f), "Leave World: " + this.GetOnOff(FishBot.leaveEnd));
                GUI.Label(new Rect(200f, 95f, 145f, 25f), "Hibernate PC: " + this.GetOnOff(FishBot.hibernateEnd));
              }
              GUI.EndGroup();
              if (!FishBot.active)
              {
                GUI.Box(new Rect(295f, 135f, 104f, 210f), "On Finished");
                GUI.BeginGroup(new Rect(295f, 135f, 104f, 210f));
                FishBot.leaveEnd = GUI.Toggle(new Rect(5f, 15f, 104f, 25f), FishBot.leaveEnd, "Leave World");
                FishBot.hibernateEnd = GUI.Toggle(new Rect(5f, 45f, 104f, 25f), FishBot.hibernateEnd, "Hibernate PC");
                GUI.EndGroup();
                break;
              }
              break;
            case Main.SubPage1.RichPresence:
              GUI.Label(new Rect(5f, 50f, 200f, 20f), "Buttons\\DiscordPresence");
              if (GUI.Button(new Rect(5f, 75f, 50f, 20f), "back"))
              {
                Main.sub1 = Main.SubPage1.None;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 47, 0.0f, -1);
              }
              if (DiscordManager.initialized)
              {
                if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Deactivate"))
                {
                  DiscordManager.client.Deinitialize();
                  DiscordManager.initialized = false;
                }
              }
              else if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Activate"))
                DiscordManager.Init();
              GUI.Box(new Rect(5f, 135f, 180f, 210f), "Display Options");
              GUI.BeginGroup(new Rect(5f, 135f, 170f, 210f));
              DiscordManager.showWorld = GUI.Toggle(new Rect(5f, 15f, 170f, 25f), DiscordManager.showWorld, "Show World");
              DiscordManager.showName = GUI.Toggle(new Rect(5f, 35f, 170f, 25f), DiscordManager.showName, "Show Name");
              GUI.EndGroup();
              break;
            case Main.SubPage1.MineBot:
              GUI.Label(new Rect(5f, 50f, 250f, 20f), "Buttons\\Mine Bot " + (Globals.mineBot.state != MineBot.BotState.None ? Globals.mineBot.state.ToString() : ""));
              if (GUI.Button(new Rect(5f, 75f, 50f, 20f), "back"))
              {
                Main.sub1 = Main.SubPage1.None;
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 47, 0.0f, -1);
              }
              if (MineBot.active)
              {
                if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Stop"))
                {
                  double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
                  MineBot.Stop("", true);
                }
              }
              else if (GUI.Button(new Rect(5f, 100f, 100f, 30f), "Launch"))
              {
                double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 12, 0.0f, -1);
                MineBot.Start();
              }
              GUI.Box(new Rect(5f, 135f, 215f, 210f), "Play Options");
              GUI.BeginGroup(new Rect(5f, 135f, 215f, 210f));
              Globals.mineBot.mineLevels[4] = GUI.Toggle(new Rect(5f, 15f, 100f, 20f), Globals.mineBot.mineLevels[4], "MineLVL 5");
              Globals.mineBot.mineLevels[3] = GUI.Toggle(new Rect(5f, 40f, 100f, 20f), Globals.mineBot.mineLevels[3], "MineLVL 4");
              Globals.mineBot.mineLevels[2] = GUI.Toggle(new Rect(5f, 65f, 100f, 20f), Globals.mineBot.mineLevels[2], "MineLVL 3");
              Globals.mineBot.mineLevels[1] = GUI.Toggle(new Rect(5f, 90f, 100f, 20f), Globals.mineBot.mineLevels[1], "MineLVL 2");
              MineBot.showPath = GUI.Toggle(new Rect(5f, 115f, 100f, 20f), MineBot.showPath, "ShowPath:test");
              MineBot.nigaMode = GUI.Toggle(new Rect(5f, 140f, 100f, 20f), MineBot.nigaMode, "Fast mode");
              GUI.Label(new Rect(5f, 155f, 130f, 60f), "Enemy Priority:\n" + Globals.mineBot.EPriority.ToString());
              MineBot.enemyPriorityMode = GUI.HorizontalSlider(new Rect(5f, 193f, 100f, 20f), MineBot.enemyPriorityMode, 0.0f, 4f);
              MineBot.pickShit = GUI.Toggle(new Rect(110f, 15f, 100f, 20f), MineBot.pickShit, "Pick shit ingre");
              if (Globals.mineBot.webhook != "")
                MineBot.useWebhook = GUI.Toggle(new Rect(110f, 40f, 100f, 20f), MineBot.useWebhook, "Webhook Logs");
              if (GUI.Button(new Rect(110f, 65f, 100f, 25f), "Set Webhook") && Object.op_Inequality((Object) ControllerHelper.rootUI, (Object) null))
              {
                SimpleInputUI.SetSimpleInputUIValues("Setup Webhook", "Write down discord webhook url", Globals.mineBot.webhook, Action<string>.op_Implicit(new Action<string>(Globals.mineBot.SetWebhook)), "Accept", "Cancel", "Webhook URL is:", false, 1);
                ControllerHelper.rootUI.OnOrOffMenu(Il2CppType.Of<SimpleInputUI>());
              }
              MineBot.hibernateEnd = GUI.Toggle(new Rect(110f, 90f, 104f, 20f), MineBot.hibernateEnd, "Sleep on error");
              GUI.EndGroup();
              GUI.Box(new Rect(225f, 135f, 150f, 210f), "Stats");
              GUI.BeginGroup(new Rect(225f, 135f, 150f, 210f));
              GUI.Label(new Rect(5f, 15f, 145f, 25f), "Passed : " + (MineBot.active ? (DateTime.Now.Subtract(Globals.mineBot.allTimePassed).TotalMinutes < 1.0 ? string.Format("{0}s", (object) Math.Round(DateTime.Now.Subtract(Globals.mineBot.allTimePassed).TotalSeconds, 2)) : string.Format("{0}mins", (object) Math.Round(DateTime.Now.Subtract(Globals.mineBot.allTimePassed).TotalMinutes, 2))) : string.Format("{0}mins", (object) Math.Round(Globals.mineBot.endTime.Subtract(Globals.mineBot.allTimePassed).TotalMinutes, 2))));
              GUI.Label(new Rect(5f, 40f, 145f, 25f), "MGems: " + Globals.mineBot.gems.ToString());
              GUI.Label(new Rect(5f, 65f, 145f, 25f), "Mines: " + Globals.mineBot.minesCleared.ToString());
              GUI.Label(new Rect(5f, 90f, 145f, 25f), "XP: " + Globals.mineBot.xp.ToString());
              GUI.Label(new Rect(5f, 115f, 145f, 25f), "Enemies: " + Globals.mineBot.enemyKilled.ToString());
              GUI.Label(new Rect(5f, 140f, 145f, 25f), "Tokens: " + (Globals.playerData == null ? "-" : Globals.playerData.GetCount(new PlayerData.InventoryKey((World.BlockType) 4171, (PlayerData.InventoryItemType) 7)).ToString()));
              GUI.Label(new Rect(5f, 165f, 145f, 25f), "Dark Stones: " + (Globals.playerData == null ? "-" : Globals.playerData.GetCount(new PlayerData.InventoryKey((World.BlockType) 4170, (PlayerData.InventoryItemType) 7)).ToString()));
              GUI.EndGroup();
              break;
          }
          break;
        case Main.Tab.Page2:
          GUI.Label(new Rect(5f, 50f, 50f, 25f), "Toggles");
          Globals.antiBounce = GUI.Toggle(new Rect(5f, 75f, 130f, 33f), Globals.antiBounce, "WalkON (alt+3)");
          Globals.godMode = GUI.Toggle(new Rect(5f, 105f, 130f, 33f), Globals.godMode, "God Mode (alt+4)");
          Globals.fly = GUI.Toggle(new Rect(5f, 135f, 130f, 33f), Globals.fly, "Fly v1 (alt+`)");
          Globals.ignoreVortex = GUI.Toggle(new Rect(5f, 165f, 130f, 33f), Globals.ignoreVortex, "IgnoreVortex (alt+5)");
          Globals.noKnockBack = GUI.Toggle(new Rect(5f, 195f, 130f, 33f), Globals.noKnockBack, "No KnockBack");
          Globals.blockOnPlayer = GUI.Toggle(new Rect(5f, 225f, 130f, 33f), Globals.blockOnPlayer, "BlockKill (alt+6)");
          Globals.antiCollect = GUI.Toggle(new Rect(5f, (float) byte.MaxValue, 130f, 33f), Globals.antiCollect, "Anti-Collect (alt+8)");
          Globals.instaRespawn = GUI.Toggle(new Rect(5f, 285f, 130f, 33f), Globals.instaRespawn, "Instant Respawn");
          Globals.mouseFly = GUI.Toggle(new Rect(5f, 315f, 130f, 33f), Globals.mouseFly, "Mouse Fly");
          Globals.aiAimBot = GUI.Toggle(new Rect(145f, 75f, 130f, 33f), Globals.aiAimBot, "Enemy AimBot");
          Globals.giveawayMode = GUI.Toggle(new Rect(145f, 105f, 130f, 33f), Globals.giveawayMode, "Giveaway Mode");
          Globals.autoClaimGift = GUI.Toggle(new Rect(145f, 135f, 130f, 33f), Globals.autoClaimGift, "Auto GiftBox");
          Globals.playerAimBot = GUI.Toggle(new Rect(145f, 165f, 130f, 33f), Globals.playerAimBot, "Player AimBot");
          Globals.dataTooltip = GUI.Toggle(new Rect(145f, 195f, 130f, 33f), Globals.dataTooltip, "Show Data Tooltip");
          Globals.noBlockKill = GUI.Toggle(new Rect(145f, 225f, 130f, 33f), Globals.noBlockKill, "No BlockKill");
          Globals.handleWP = GUI.Toggle(new Rect(145f, (float) byte.MaxValue, 130f, 33f), Globals.handleWP, "Delay Summon");
          if (GUI.Toggle(new Rect(145f, 285f, 130f, 33f), Globals.autoPlaceWL, "Auto Place WL"))
          {
            PlayerData.InventoryItemType itemType = ControllerHelper.gameplayUI.inventoryControl.GetCurrentSelection().itemType;
            PlayerCheats.cInventorySelection = ControllerHelper.gameplayUI.inventoryControl.GetCurrentSelection().blockType;
            if (itemType != 1 && itemType != 3 && itemType != 12 && itemType != 7 && itemType != 2 && PlayerCheats.cInventorySelection > 0)
            {
              Globals.autoPlaceWL = true;
            }
            else
            {
              Globals.autoPlaceWL = false;
              Utils.Error("We can't place " + TextManager.GetBlockTypeOrSeedName(ControllerHelper.gameplayUI.inventoryControl.GetCurrentSelection()) + " as block!");
            }
          }
          else
            Globals.autoPlaceWL = false;
          Globals.colorfulNames = GUI.Toggle(new Rect(145f, 315f, 130f, 33f), Globals.colorfulNames, "Colorful Names");
          Globals.handleKick = GUI.Toggle(new Rect(285f, 75f, 130f, 33f), Globals.handleKick, "Delay kick/ban");
          Globals.autoBan = GUI.Toggle(new Rect(285f, 105f, 130f, 33f), Globals.autoBan, "Auto-Ban players");
          Globals.ignoreDisconnect = GUI.Toggle(new Rect(285f, 135f, 130f, 33f), Globals.ignoreDisconnect, "Ignore DC");
          Globals.safeAnnoySound = GUI.Toggle(new Rect(285f, 165f, 130f, 33f), Globals.safeAnnoySound, "Safe Annoy");
          Globals.annoySound = GUI.Toggle(new Rect(285f, 195f, 130f, 33f), Globals.annoySound, "Annoy Hit");
          Globals.recipesHack = GUI.Toggle(new Rect(285f, 225f, 130f, 33f), Globals.recipesHack, "Unlock Recipes");
          Globals.bedHack = GUI.Toggle(new Rect(285f, (float) byte.MaxValue, 130f, 33f), Globals.bedHack, "Sit With Players");
          Globals.noProfanityFilter = GUI.Toggle(new Rect(285f, 285f, 130f, 33f), Globals.noProfanityFilter, "Ignore Profanity");
          Globals.noAFK = GUI.Toggle(new Rect(285f, 315f, 130f, 33f), Globals.noAFK, "Anti-AFK");
          break;
        case Main.Tab.Page3:
          Main.dataHackShow = GUI.Toggle(new Rect(5f, 75f, 120f, 33f), Main.dataHackShow, "Expert Mode");
          if (Main.dataHackShow)
          {
            Globals.cmOutgoing = GUI.Toggle(new Rect(5f, 105f, 200f, 33f), Globals.cmOutgoing, "Capture Outgoing Messages");
            Globals.cmIncoming = GUI.Toggle(new Rect(5f, 135f, 200f, 33f), Globals.cmIncoming, "Capture Incoming Messages");
            Globals.dataSpam = GUI.Toggle(new Rect(5f, 50f, 200f, 33f), Globals.dataSpam, "Флудер");
            if (GUI.Button(new Rect(5f, 165f, 90f, 30f), "Add /ocapture"))
            {
              Globals.oCapture.Add(Main.dataHackInput);
              MelonLogger.Msg("[CaptureOutgoing] Packet ID \"" + Main.dataHackInput + "\" added to the list");
            }
            if (GUI.Button(new Rect(95f, 165f, 90f, 30f), "Add /icapture"))
            {
              Globals.iCapture.Add(Main.dataHackInput);
              MelonLogger.Msg("[CaptureIncoming] Packet ID \"" + Main.dataHackInput + "\" added to the list");
            }
            if (GUI.Button(new Rect(5f, 195f, 90f, 30f), "Reset /ocapt.."))
            {
              Globals.oCapture.Clear();
              MelonLogger.Msg("[CaptureOutgoing] List Cleared.");
            }
            if (GUI.Button(new Rect(95f, 195f, 90f, 30f), "Reset /icapt.."))
            {
              Globals.iCapture.Clear();
              MelonLogger.Msg("[CaptureIncoming] List Cleared");
            }
            if (GUI.Button(new Rect(5f, 225f, 180f, 30f), "Send Custom Packet"))
            {
              if (!File.Exists(Directory.GetCurrentDirectory() + "\\UserData\\MyPacket.json"))
              {
                MelonLogger.BigError("Proxy", "The file does not exist on " + Directory.GetCurrentDirectory() + "\\UserData\\MyPacket.json\nPlease create it!");
                return;
              }
              string str;
              try
              {
                str = File.ReadAllText(Directory.GetCurrentDirectory() + "\\UserData\\MyPacket.json");
                Main.dataHackInput = str;
              }
              catch
              {
                MelonLogger.Error("Could not load or format file/packet from Pixel Worlds\\UserData\\MyPacket.json; Please create it if you don't haven't yet!");
                return;
              }
              BsonDocument bsonDocument = BsonSerializer.Deserialize<BsonDocument>(str, (Action<BsonDeserializationContext.Builder>) null);
              BsonExtensionMethods.ToBson<BsonDocument>(bsonDocument, (IBsonSerializer<BsonDocument>) null, (BsonBinaryWriterSettings) null, (Action<BsonSerializationContext.Builder>) null, new BsonSerializationArgs(), 0);
              BSONObject bson = SimpleBSON.Load(Il2CppStructArray<byte>.op_Implicit(BsonExtensionMethods.ToBson<BsonDocument>(bsonDocument, (IBsonSerializer<BsonDocument>) null, (BsonBinaryWriterSettings) null, (Action<BsonSerializationContext.Builder>) null, new BsonSerializationArgs(), 0)));
              BSONObject bsonObject = BsonHelper.FormatBson(bson);
              if (BSONValue.op_Inequality((BSONValue) bsonObject, (Object) null))
                bson = bsonObject;
              OutgoingMessages.AddOneMessageToList(bson);
              Console.WriteLine("CUSTOM SEND: " + Utils.DumpBSON(bson));
            }
            if (GUI.Button(new Rect(5f, (float) byte.MaxValue, 180f, 30f), "Simulate Custom Packet"))
            {
              if (!File.Exists(Directory.GetCurrentDirectory() + "\\UserData\\MyPacket.json"))
              {
                MelonLogger.BigError("Proxy", "The file does not exist on " + Directory.GetCurrentDirectory() + "\\UserData\\MyPacket.json\nPlease create it!");
                return;
              }
              string str;
              try
              {
                str = File.ReadAllText(Directory.GetCurrentDirectory() + "\\UserData\\MyPacket.json");
                Main.dataHackInput = str;
              }
              catch
              {
                MelonLogger.Error("Could not load or format file/packet from Pixel Worlds\\UserData\\MyPacket.json; Please create it if you don't haven't yet!");
                return;
              }
              BsonDocument bsonDocument = BsonSerializer.Deserialize<BsonDocument>(str, (Action<BsonDeserializationContext.Builder>) null);
              BsonExtensionMethods.ToBson<BsonDocument>(bsonDocument, (IBsonSerializer<BsonDocument>) null, (BsonBinaryWriterSettings) null, (Action<BsonSerializationContext.Builder>) null, new BsonSerializationArgs(), 0);
              BSONObject bsonObject1 = SimpleBSON.Load(Il2CppStructArray<byte>.op_Implicit(BsonExtensionMethods.ToBson<BsonDocument>(bsonDocument, (IBsonSerializer<BsonDocument>) null, (BsonBinaryWriterSettings) null, (Action<BsonSerializationContext.Builder>) null, new BsonSerializationArgs(), 0)));
              BSONObject bsonObject2 = BsonHelper.FormatBson(bsonObject1);
              if (BSONValue.op_Inequality((BSONValue) bsonObject2, (Object) null))
                bsonObject1 = bsonObject2;
              Utils.SimulateMessages(bsonObject1);
              Console.WriteLine("CUSTOM RECEIVE(Simulate): " + Utils.DumpBSON(bsonObject1));
            }
          }
          GUI.Box(new Rect(200f, 65f, 200f, 275f), "");
          GUI.Label(new Rect(203f, 338f, 220f, 35f), "Put in prize box to keep values");
          if (GUI.Button(new Rect(205f, 70f, 90f, 33f), "Max Level"))
            PlayerCheats.ChangeIK(PlayerCheats.DataHackType.Familiar, "level", "", 5);
          if (GUI.Button(new Rect(305f, 70f, 90f, 33f), "Unname"))
          {
            PlayerCheats.ChangeIK(PlayerCheats.DataHackType.Familiar, "isNameChanged", "false");
            PlayerCheats.ChangeIK(PlayerCheats.DataHackType.Familiar, "name", "");
          }
          if (GUI.Button(new Rect(205f, 109f, 90f, 33f), "Rebirth"))
          {
            try
            {
              PlayerData.InventoryKey currentSelection = Globals.gameplayUI.inventoryControl.GetCurrentSelection();
              InventoryItemBase inventoryData = Globals.playerData.GetInventoryData(currentSelection);
              BSONObject asBson = inventoryData.GetAsBSON();
              ((BSONValue) asBson)["dateOfBirthTicks"] = BSONValue.op_Implicit(this.FixTicks(DateTime.Now.ToUniversalTime().Ticks));
              inventoryData.SetViaBSON(asBson);
              Utils.Msg("Changed \"dateOfBirthTicks\" for " + TextManager.GetBlockTypeOrSeedName(currentSelection));
            }
            catch
            {
              Utils.Error("I can't hack " + TextManager.GetBlockTypeOrSeedName(Globals.gameplayUI.inventoryControl.GetCurrentSelection()) + ", select correct item from inventory!");
            }
          }
          if (GUI.Button(new Rect(305f, 109f, 90f, 33f), "Add Month"))
          {
            try
            {
              PlayerData.InventoryKey currentSelection = Globals.gameplayUI.inventoryControl.GetCurrentSelection();
              InventoryItemBase inventoryData = Globals.playerData.GetInventoryData(currentSelection);
              BSONObject asBson = inventoryData.GetAsBSON();
              BSONObject bsonObject = asBson;
              DateTime dateTime = DateTime.FromBinary(((BSONValue) asBson)["dateOfBirthTicks"].int64Value);
              dateTime = dateTime.AddMonths(-1);
              BSONValue bsonValue = BSONValue.op_Implicit(this.FixTicks(dateTime.Ticks));
              ((BSONValue) bsonObject)["dateOfBirthTicks"] = bsonValue;
              inventoryData.SetViaBSON(asBson);
              Utils.Msg("Changed \"dateOfBirthTicks\" for " + TextManager.GetBlockTypeOrSeedName(currentSelection));
            }
            catch
            {
              Utils.Error("Nab, i can't hack " + TextManager.GetBlockTypeOrSeedName(Globals.gameplayUI.inventoryControl.GetCurrentSelection()) + ", select correct item from inventory!");
            }
          }
          Main.dataHackInput = GUI.TextArea(new Rect(205f, 145f, 190f, 65f), Main.dataHackInput, 124);
          if (GUI.Button(new Rect(205f, 215f, 90f, 33f), "Bottle Topic"))
            PlayerCheats.ChangeIK(PlayerCheats.DataHackType.Bottle, "topic", Main.dataHackInput);
          if (GUI.Button(new Rect(305f, 215f, 90f, 33f), "Bottle Text"))
            PlayerCheats.ChangeIK(PlayerCheats.DataHackType.Bottle, "message", Main.dataHackInput);
          if (GUI.Button(new Rect(205f, 250f, 90f, 33f), "Creator Name"))
            PlayerCheats.ChangeIK(PlayerCheats.DataHackType.Bottle, "sendername", Main.dataHackInput);
          if (GUI.Button(new Rect(305f, 250f, 90f, 33f), "Bottle World"))
            PlayerCheats.ChangeIK(PlayerCheats.DataHackType.Bottle, "worldname", Main.dataHackInput);
          if (GUI.Button(new Rect(205f, 300f, 190f, 33f), "Inf. Durability"))
          {
            PlayerCheats.SetInfDurability(1000000);
            break;
          }
          break;
        case Main.Tab.Page4:
          GUI.Label(new Rect(5f, 50f, 130f, 33f), string.Format("[{0}] SH Speed:", (object) Math.Round((double) Globals.speedHackSpeed, 1)));
          Globals.speedHackSpeed = GUI.HorizontalSlider(new Rect(132f, 52f, 250f, 33f), Globals.speedHackSpeed, 1.8f, 10f);
          GUI.Label(new Rect(5f, 90f, 130f, 33f), string.Format("[{0}] FCam Speed:", (object) Math.Round((double) Globals.freeCamSpeed, 1)));
          Globals.freeCamSpeed = GUI.HorizontalSlider(new Rect(132f, 90f, 250f, 33f), Globals.freeCamSpeed, 0.05f, 1f);
          GUI.Label(new Rect(5f, 130f, 130f, 33f), string.Format("[{0}] Keys Fly:", (object) Math.Round((double) Globals.keysFlySpeed, 1)));
          Globals.keysFlySpeed = GUI.HorizontalSlider(new Rect(132f, 128f, 250f, 33f), Globals.keysFlySpeed, 1.8f, 10f);
          break;
        case Main.Tab.Page5:
          GUI.Label(new Rect(5f, 50f, 150f, 20f), "ESP Lines");
          GUI.Label(new Rect(5f, 325f, 200f, 35f), "Render by cesema");
          Globals.playerESP = GUI.Toggle(new Rect(5f, 75f, 300f, 33f), Globals.playerESP, "Players");
          Globals.enemyESP = GUI.Toggle(new Rect(5f, 105f, 300f, 33f), Globals.enemyESP, "Enemies (lag)");
          Globals.gemstoneESP = GUI.Toggle(new Rect(5f, 135f, 300f, 33f), Globals.gemstoneESP, "Gemstones");
          Globals.collectableESP = GUI.Toggle(new Rect(5f, 165f, 350f, 33f), Globals.collectableESP, "Collectables (lag)");
          Globals.giftboxESP = GUI.Toggle(new Rect(5f, 195f, 350f, 33f), Globals.giftboxESP, "Gift Boxes");
          Globals.extraESP = GUI.Toggle(new Rect(5f, 225f, 300f, 33f), Globals.extraESP, "Extra Events");
          break;
      }
      GUI.DragWindow();
    }

    public virtual void OnGUI()
    {
      GUI.skin.label.fontSize = 14;
      if (Main.showMenu)
        Main.windowSize = GUI.Window(0, Main.windowSize, GUI.WindowFunction.op_Implicit(new Action<int>(this.MyMenu)), "fuck you");
      if (Main.showInfoBox)
      {
        GUI.Box(new Rect(10f, (float) (Screen.height - 300), 178f, 240f), "F10 to hide");
        Rect rect = new Rect(13f, (float) (Screen.height - 290), 178f, 240f);
        string[] strArray = new string[13]
        {
          "\nF1 Show/Hide GUI\n[",
          this.GetOnOff(Globals.dataTooltip),
          "]F2 Data Tooltip\n[",
          this.GetOnOff(Globals.freeCam),
          "]F3 FreeCam\n[",
          this.GetOnOff(Globals.keysToFly),
          "]F4 KeysFly\n[",
          this.GetOnOff(Globals.lagHack),
          "]F5 LagHack\n[",
          this.GetOnOff(Globals.invisHack),
          "]F6 InvisHack\nF8 Leave World\nF9 Reload World\nAlt+Right Click TP",
          string.Format("\nPing {0}ms", (object) KukouriTime.lag),
          null
        };
        // ISSUE: variable of a boxed type
        __Boxed<int> hours = (ValueType) DateTime.Now.TimeOfDay.Hours;
        DateTime now = DateTime.Now;
        // ISSUE: variable of a boxed type
        __Boxed<int> minutes = (ValueType) now.TimeOfDay.Minutes;
        now = DateTime.Now;
        // ISSUE: variable of a boxed type
        __Boxed<int> seconds = (ValueType) now.TimeOfDay.Seconds;
        strArray[12] = string.Format("\nTime {0}:{1}:{2}", (object) hours, (object) minutes, (object) seconds);
        string str = string.Concat(strArray);
        GUIStyle infoBoxStyle1 = Main.infoBoxStyle1;
        GUI.Label(rect, str, infoBoxStyle1);
      }
      try
      {
        if (Globals.playerESP && NetworkPlayers.otherPlayers.Count > 0 && Globals.world != null)
        {
          foreach (NetworkPlayer otherPlayer in NetworkPlayers.otherPlayers)
          {
            Vector2 vector2_1 = Vector2.op_Implicit(Globals.player.currentPlayerPosition);
            Vector2 vector2_2 = Vector2.op_Implicit(otherPlayer.playerScript.myTransform.position);
            vector2_1.y += 0.2f;
            vector2_2.y += 0.2f;
            Vector2 pointA = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2_1)));
            Vector2 pointB = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2_2)));
            pointA.y = (float) Screen.height - pointA.y;
            pointB.y = (float) Screen.height - pointB.y;
            Render.DrawLine(pointA, pointB, Color.yellow, 2.2f);
          }
        }
        if (Globals.enemyESP && Object.op_Inequality((Object) Globals.player, (Object) null))
        {
          foreach (AIEnemyMonoBehaviourBase monoBehaviourBase in Object.FindObjectsOfType<AIEnemyMonoBehaviourBase>())
          {
            if (Object.op_Inequality((Object) monoBehaviourBase, (Object) null) && AIEnemies.CanPlayerHitAIEnemy(monoBehaviourBase.aiBase.id))
            {
              Vector2 vector2_3 = Vector2.op_Implicit(((Component) Globals.player).transform.position);
              Vector2 vector2_4 = Vector2.op_Implicit(((Component) monoBehaviourBase).transform.position);
              vector2_3.y += 0.1f;
              vector2_4.y += 0.1f;
              Vector2 pointA = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2_3)));
              Vector2 pointB = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2_4)));
              pointA.y = (float) Screen.height - pointA.y;
              pointB.y = (float) Screen.height - pointB.y;
              Render.DrawLine(pointA, pointB, Color.red, 1.5f);
            }
          }
        }
        if (Globals.gemstoneESP && Globals.world != null && Globals.world.worldName == "MINEWORLD")
        {
          for (int index = 0; index < Main.gemstonesInWorld.Count; ++index)
          {
            if (Main.IsBlockGemstoneBlock(Main.gemstonesInWorld[index]))
            {
              Vector2 vector2 = Vector2.op_Implicit(Globals.player.currentPlayerPosition);
              Vector2 worldPoint = Utils.ConvertMapPointToWorldPoint(Main.gemstonesInWorld[index]);
              vector2.y += 0.1f;
              Vector2 pointA = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2)));
              Vector2 pointB = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(worldPoint)));
              pointA.y = (float) Screen.height - pointA.y;
              pointB.y = (float) Screen.height - pointB.y;
              Render.DrawLine(pointA, pointB, Color.green, 2f);
            }
            else
              Main.gemstonesInWorld.Remove(Main.gemstonesInWorld[index]);
          }
        }
        if (Globals.collectableESP && Globals.world != null)
        {
          List<Vector2i> vector2iList = new List<Vector2i>();
          int num = 0;
          for (int index = 0; index < Globals.world.collectables.Count; ++index)
          {
            if (!Globals.world.collectables[index].isGem && !vector2iList.Contains(Globals.world.collectables[index].mapPoint))
            {
              if (num < 50)
              {
                Vector2 vector2 = Vector2.op_Implicit(Globals.player.currentPlayerPosition);
                Vector2 worldPoint = Utils.ConvertMapPointToWorldPoint(Globals.world.collectables[index].mapPoint);
                vector2.y += 0.1f;
                Vector2 pointA = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2)));
                Vector2 pointB = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(worldPoint)));
                pointA.y = (float) Screen.height - pointA.y;
                pointB.y = (float) Screen.height - pointB.y;
                Render.DrawLine(pointA, pointB, Color.white, 1f);
                ++num;
                vector2iList.Add(Globals.world.collectables[index].mapPoint);
              }
              else
                break;
            }
          }
        }
        if (Globals.giftboxESP && Object.op_Inequality((Object) Globals.player, (Object) null))
        {
          for (int index = 0; index < BMod.Patches.Patches.giftBoxes.Count; ++index)
          {
            if (ConfigData.IsBlockGiftBox(Globals.world.GetBlockType(BMod.Patches.Patches.giftBoxes[index])))
            {
              Vector2 vector2 = Vector2.op_Implicit(Globals.player.currentPlayerPosition);
              Vector2 worldPoint = Utils.ConvertMapPointToWorldPoint(BMod.Patches.Patches.giftBoxes[index]);
              vector2.y += 0.1f;
              Vector2 pointA = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2)));
              Vector2 pointB = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(worldPoint)));
              pointA.y = (float) Screen.height - pointA.y;
              pointB.y = (float) Screen.height - pointB.y;
              Render.DrawLine(pointA, pointB, Color.cyan, 2f);
            }
            else
              BMod.Patches.Patches.giftBoxes.Remove(BMod.Patches.Patches.giftBoxes[index]);
          }
        }
        if (Globals.extraESP && Object.op_Inequality((Object) Globals.player, (Object) null))
        {
          for (int index = 0; index < Globals.extraESPbutterflies.Count; ++index)
          {
            if (ConfigData.IsBlockButterflyEventItem(Globals.world.GetBlockType(Globals.extraESPbutterflies[index])))
            {
              Vector2 vector2 = Vector2.op_Implicit(Globals.player.currentPlayerPosition);
              Vector2 worldPoint = Utils.ConvertMapPointToWorldPoint(Globals.extraESPbutterflies[index]);
              vector2.y += 0.1f;
              Vector2 pointA = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2)));
              Vector2 pointB = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(worldPoint)));
              pointA.y = (float) Screen.height - pointA.y;
              pointB.y = (float) Screen.height - pointB.y;
              Render.DrawLine(pointA, pointB, Color.magenta, 2f);
            }
            else
              Globals.extraESPbutterflies.Remove(Globals.extraESPbutterflies[index]);
          }
          if (Object.op_Inequality((Object) Globals.current_spirit, (Object) null))
          {
            Vector2 vector2 = Vector2.op_Implicit(Globals.player.currentPlayerPosition);
            vector2.y += 0.1f;
            Vector2 pointA = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(Vector2.op_Implicit(vector2)));
            Vector2 pointB = Vector2.op_Implicit(Camera.main.WorldToScreenPoint(((Component) Globals.current_spirit).transform.position));
            pointA.y = (float) Screen.height - pointA.y;
            pointB.y = (float) Screen.height - pointB.y;
            Render.DrawLine(pointA, pointB, Color.magenta, 2f);
          }
        }
        if (Globals.dataTooltip)
          WorldCheats.QueryWorldItemData(Utils.ConvertWorldPointToMapPoint(Vector2.op_Implicit(Camera.main.ScreenToWorldPoint(Input.mousePosition))));
        if (Globals.isTeleporting && Globals.teleportPath.Count >= 15)
        {
          GUI.Box(new Rect(0.0f, 150f, (float) Screen.width, 50f), "");
          GUI.Label(new Rect(0.0f, 150f, (float) Screen.width, 50f), "TELEPORTING TO " + Globals.targetTp.ToString() + " | BLOCKS: " + Globals.teleportPath.Count.ToString() + " | PROGRESS: " + Math.Round((double) Globals.currentTp / (double) Globals.teleportPath.Count * 100.0, 0).ToString() + "%", Main.infoBoxStyle2);
        }
        else if (MineBot.active && Globals.mineBot.path != null && (Globals.mineBot.state == MineBot.BotState.Moving || Globals.mineBot.state == MineBot.BotState.Breaking))
        {
          GUI.Box(new Rect(0.0f, 150f, (float) Screen.width, 50f), "");
          GUI.Label(new Rect(0.0f, 150f, (float) Screen.width, 50f), "MINING | " + Globals.mineBot.path.Count.ToString() + " Blocks Left | Passed: " + ((int) Globals.mineBot.timePassed).ToString() + "s", Main.infoBoxStyle2);
        }
        else
        {
          if (!MineBot.active || Globals.mineBot.state == 0)
            return;
          GUI.Box(new Rect(0.0f, 150f, (float) Screen.width, 50f), "");
          GUI.Label(new Rect(0.0f, 150f, (float) Screen.width, 50f), string.Format("MINING | Status: {0} | Passed: ", (object) Globals.mineBot.state) + ((int) Globals.mineBot.timePassed).ToString() + "s", Main.infoBoxStyle2);
        }
      }
      catch
      {
      }
    }

    public virtual void OnUpdate()
    {
      try
      {
        if (Input.GetKeyDown((KeyCode) 282))
          Main.showMenu = !Main.showMenu;
        try
        {
          ControllerHelper.kukouriCamera.minZoom = 1;
        }
        catch
        {
        }
        PlayerCheats.UpdateCheats();
        if (Input.GetKeyDown((KeyCode) 285))
        {
          if (!Globals.keysToFly)
            Main.usedNoBounceBefore = Globals.antiBounce;
          Globals.keysToFly = !Globals.keysToFly;
          Globals.fly = false;
          Globals.antiBounce = true;
          if (!Globals.keysToFly)
            Globals.antiBounce = Main.usedNoBounceBefore;
        }
        try
        {
          HotkeyEvent.Update();
        }
        catch
        {
        }
        if (Input.GetKeyDown((KeyCode) 291))
          Main.showInfoBox = !Main.showInfoBox;
        if (SummonTimer.doNow)
        {
          SummonTimer._time -= Time.deltaTime;
          if ((double) SummonTimer._time <= 0.0)
          {
            SummonTimer.doNow = false;
            SummonTimer.OnTimer();
          }
        }
        if (Input.GetKey((KeyCode) 308) && Input.GetMouseButtonDown(1) && !Globals.teleport.isTeleporting)
        {
          Vector2i mapPoint = Utils.ConvertWorldPointToMapPoint(Vector2.op_Implicit(Camera.main.ScreenToWorldPoint(Input.mousePosition)));
          World.BlockType blockType = Globals.world.GetBlockType(Globals.player.currentPlayerMapPoint);
          if (ConfigData.IsBlockPortalWireable(Globals.world.GetBlockType(mapPoint)))
          {
            if (Globals.world.GetBlockType(mapPoint) == 110)
              this.WarpToMP(mapPoint);
            if (Globals.world.GetWorldItemData(Globals.player.currentPlayerMapPoint) == null)
            {
              Main.GoToMP(mapPoint);
              return;
            }
            if (Globals.world.DoesPlayerHaveRightToModifyItemData(Globals.player.currentPlayerMapPoint, Globals.playerData, false))
              this.WarpToMP(mapPoint);
            else if (blockType == 1799 || blockType == 4373 || blockType == 2001)
              this.WarpToMP(mapPoint);
            else if (ConfigData.IsBlockPortal(blockType) && blockType != 110)
            {
              BSONObject asBson1 = Globals.world.GetWorldItemData(Globals.player.currentPlayerMapPoint).GetAsBSON();
              BSONObject asBson2 = Globals.world.GetWorldItemData(mapPoint).GetAsBSON();
              if (BSONValue.op_Inequality((BSONValue) asBson1, (Object) null) && BSONValue.op_Inequality((BSONValue) asBson2, (Object) null))
              {
                if (((BSONValue) asBson1)["targetEntryPointID"].stringValue == ((BSONValue) asBson2)["entryPointID"].stringValue && Globals.world.DoesPlayerHaveRightToGoPortal(Globals.playerData, mapPoint))
                  this.WarpToMP(mapPoint);
                else if (!((BSONValue) asBson1)["isLocked"].boolValue && ((BSONValue) asBson1)["targetWorldID"].stringValue.ToUpper() != Globals.world.worldName.ToUpper() && !string.IsNullOrWhiteSpace(((BSONValue) asBson1)["targetWorldID"].stringValue))
                  this.WarpToMP(mapPoint);
                else
                  Main.GoToMP(mapPoint);
              }
            }
            else
              Main.GoToMP(mapPoint);
          }
          else
            Main.GoToMP(mapPoint);
        }
        Globals.teleportTimer += Time.deltaTime;
        Globals.teleportSpeed = Globals.teleportPath.ToArray().Length >= 65 ? 0.03f : 0.01f;
        if ((!Globals.isTeleporting ? 0U : ((double) Globals.teleportTimer >= (double) Globals.teleportSpeed ? 1U : 0U)) <= 0U)
          return;
        if (Object.op_Equality((Object) Globals.player, (Object) null))
          return;
        try
        {
          PNode pnode = Globals.teleportPath[Globals.currentTp];
          if (Globals.currentTp >= Globals.teleportPath.Count - 1)
          {
            Globals.teleportPath.Clear();
            Globals.currentTp = 0;
            Globals.isTeleporting = false;
            ((Component) Globals.player).transform.position = Vector2.op_Implicit(Utils.ConvertMapPointToWorldPoint(new Vector2i(pnode.X, pnode.Y)));
            Transform transform = ((Component) Globals.player).transform;
            transform.position = Vector3.op_Subtraction(transform.position, new Vector3(0.0f, 0.1f, 0.0f));
            if (Main.warpOnTeleport)
              Globals.player.WarpPlayer(Main.warpMP.x, Main.warpMP.y);
          }
          else
          {
            OutgoingMessages.recentMapPoints.Add(new Vector2i(pnode.X, pnode.Y));
            Globals.teleportTimer = 0.0f;
            ((Component) Globals.player).transform.position = Globals.worldController.ConvertMapPointToWorldPoint(new Vector2i(pnode.X, pnode.Y));
            ++Globals.currentTp;
          }
        }
        catch
        {
          Utils.Error("We can't go there");
          Utils.DoCustomNotification("We can't go there", Globals.targetTp);
          Globals.teleportPath.Clear();
          Globals.currentTp = 0;
          Globals.isTeleporting = false;
        }
      }
      catch
      {
      }
    }

    public virtual void OnFixedUpdate()
    {
      if (FarmBot.active)
      {
        DateTime now = DateTime.Now;
        TimeSpan timeSpan = ((DateTime) ref now).Subtract(FarmBot.startTime);
        FarmBot.timeSpent = new DateTime(((TimeSpan) ref timeSpan).Ticks);
      }
      if (FishBot.active)
        FishBot.timeSpent = new DateTime(DateTime.Now.Subtract(FishBot.startTime).Ticks);
      PlayerCheats.FixedUpdateCheats();
      Globals.mineBot.Mine_OnFixedUpdate();
    }

    public static bool IsBlockGemstoneBlock(Vector2i mapPoint)
    {
      return ((IEnumerable<int>) Main.gemBlocks).Contains<int>((int) Globals.world.GetBlockType(mapPoint));
    }

    private string GetOnOff(bool value) => value ? "ON" : "OFF";

    private long FixTicks(long dateTime)
    {
      return Convert.ToInt64(Convert.ToString(dateTime).Remove(11) + "2468010");
    }

    public static bool GoToMP(Vector2i mapPoint, bool warpOnFinish = false)
    {
      Main.warpOnTeleport = warpOnFinish;
      Globals.targetTp = mapPoint;
      PathfindingResult pathfindingResult;
      Globals.teleportPath = Globals.teleport.GetPath(Globals.targetTp, out pathfindingResult);
      int num;
      switch (pathfindingResult)
      {
        case PathfindingResult.SUCCESSFUL:
          Globals.currentTp = 0;
          Globals.isTeleporting = true;
          return true;
        case PathfindingResult.Path_Not_Found:
          num = 1;
          break;
        default:
          num = pathfindingResult == PathfindingResult.Invalid_Ending_Pos ? 1 : 0;
          break;
      }
      if (num == 0)
        return false;
      Utils.DoCustomNotification("We can't go there", Globals.targetTp);
      Globals.currentTp = 0;
      Globals.isTeleporting = false;
      return false;
    }

    public void WarpToMP(Vector2i mapPoint)
    {
      ((Component) Globals.player).transform.position = Globals.worldController.ConvertMapPointToWorldPoint(mapPoint);
      double num = (double) ControllerHelper.audioManager.PlaySFX((AudioManager.SoundType) 241, 0.0f, -1);
      BSONObject bsonObject = new BSONObject();
      ((BSONValue) bsonObject)["ID"] = BSONValue.op_Implicit("PAiP");
      ((BSONValue) bsonObject)["x"] = BSONValue.op_Implicit(Globals.world.playerStartPosition.x);
      ((BSONValue) bsonObject)["y"] = BSONValue.op_Implicit(Globals.world.playerStartPosition.y);
      OutgoingMessages.AddOneMessageToList(bsonObject);
    }

    public static string FishBotMode() => FishBot.mode == 1 ? "legit" : "niga";

    public static string FishBotModeDescription()
    {
      return FishBot.mode == 1 ? "slow, no shit\nyou're legit player" : "fast, may bug\npeople report you";
    }

    public enum Tab
    {
      None,
      Page1,
      Page2,
      Page3,
      Page4,
      Page5,
    }

    internal enum SubPage1
    {
      None,
      FarmBot,
      ACTk,
      FishBot,
      RichPresence,
      MineBot,
    }
  }
}
